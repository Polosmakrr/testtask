"use strict";(self.webpackChunktesttask=self.webpackChunktesttask||[]).push([[393],{7393:function(e,n,t){t.r(n);var s=t(8152),i=t(2791),a=t(9434),o=t(9568),u=t(184);n.default=function(){var e=(0,a.I0)(),n=(0,a.v9)((function(e){return e.data.positions[0]})),t=document.forms.signUp,r=(0,i.useState)([]),l=(0,s.Z)(r,2),c=l[0],p=l[1],d=(0,i.useState)([]),h=(0,s.Z)(d,2),m=h[0],f=h[1],g=(0,i.useState)([]),_=(0,s.Z)(g,2),x=_[0],b=_[1],v=(0,i.useState)([]),j=(0,s.Z)(v,2),N=j[0],y=j[1],P=(0,i.useState)([]),w=(0,s.Z)(P,2),S=w[0],z=w[1];(0,i.useEffect)((function(){e((0,o.Av)())}),[]);var A=function(e){var n=e.target,t=n.name,s=n.value;"name"===t&&p(s),"email"===t&&b(s),"phone"===t&&f(s),"position_id"===t&&y(s),"photo"===t&&z(s)};return 0!==c.length&&0!==x.length&&0!==m.length&&0!==N.length&&0!==S.length&&(document.querySelector("#submit").disabled=!1),(0,u.jsx)("section",{className:"container",children:(0,u.jsxs)("div",{className:"signup_container",children:[(0,u.jsx)("h2",{className:"signup_title",children:"Working with POST request"}),(0,u.jsxs)("form",{className:"signup_form",method:"POST",id:"signUp",onSubmit:function(n){n.preventDefault();var s=t.name,i=t.email,a=t.phone,u=t.position_id,r=t.photo,l={position_id:u.value,name:s.value,emali:i.value,phone:a.value,photo:r.files[0]},c=new FormData;c.append("name",l.name),c.append("email",l.emali),c.append("phone",l.phone),c.append("position_id",parseInt(l.position_id)),c.append("photo",l.photo),window.AgencyAxios.get("/token").then((function(n){var t=n.data;return e((0,o.l1)(c,t.token))})).catch((function(e){return e}))},children:[(0,u.jsx)("input",{className:"signup_input",type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",minLength:2,maxLength:60,title:"Username should contain 2-60 characters and contain only letters, apostrophe, dash and spaces.",placeholder:"Your Name",onChange:A,required:!0}),(0,u.jsx)("input",{className:"signup_input",type:"email",name:"email",pattern:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",minLength:2,maxLength:100,title:"Email myst be a string and separated into two parts by @ symbol. a personal_info and a domain, that is personal_info@domain.",placeholder:"Email",onChange:A,required:!0}),(0,u.jsx)("input",{className:"signup_input",type:"tel",name:"phone",pattern:"^[\\+]{0,1}380([0-9]{9})$)",title:"Number should start with code of Ukraine +380 and must be digits and can contain spaces, dashes.",placeholder:"Phone",onChange:A,required:!0}),(0,u.jsxs)("div",{className:"signup_select",children:[(0,u.jsx)("p",{className:"signup_select_title",children:"Select your position"}),(0,u.jsx)("ul",{className:"signup_select_list list",children:n&&n.positions.map((function(e){return(0,u.jsxs)("li",{className:"signup_select_list-item",children:[(0,u.jsx)("input",{className:"signup_select_list-input",type:"radio",id:e.id,name:"position_id",value:e.id,onChange:A,required:!0}),(0,u.jsx)("label",{className:"signup_select_list-label",for:e.id,children:e.name})]},e.id)}))})]}),(0,u.jsxs)("div",{className:"signup_load_img",children:[(0,u.jsx)("label",{className:"signup_load_img-label",for:"file-input",children:"Upload"}),(0,u.jsx)("input",{className:"signup_load_img-input",for:"file-input",value:0!==S.length?"..."+S.split("\\").pop():"Upload your photo",disabled:!0}),(0,u.jsx)("input",{id:"file-input",type:"file",title:"Minimum size of photo 70x70px. The photo format must be jpeg/jpg type. The photo size must not be greater than 5 Mb.",name:"photo",required:!0,onChange:A})]}),(0,u.jsx)("div",{className:"signup_buttons",children:(0,u.jsx)("button",{className:"btn",type:"submit",id:"submit",disabled:!0,children:"Sign up"})})]})]})})}},9568:function(e,n,t){t.d(n,{Av:function(){return m},uh:function(){return h},l1:function(){return f}});var s=t(6382),i=(0,s.PH)("fetchUsersRequest"),a=(0,s.PH)("fetchUsersSuccess"),o=(0,s.PH)("fetchUsersError"),u=(0,s.PH)("fetchPositionsRequest"),r=(0,s.PH)("fetchPositionsSuccess"),l=(0,s.PH)("fetchPositionsError"),c=(0,s.PH)("postUserRequest"),p=(0,s.PH)("postUserSuccess"),d=(0,s.PH)("postUserError"),h=function(e){return function(n){n(i()),window.AgencyAxios.get("/users?page=".concat(e,"&count=6")).then((function(e){var t=e.data;n(a(t))})).catch((function(e){return n(o(e))}))}},m=function(){return function(e){e(u()),window.AgencyAxios.get("/positions").then((function(n){var t=n.data;e(r(t))})).catch((function(n){return e(l(n))}))}},f=function(e,n){return function(t){t(c()),window.AgencyAxios.post("/users",e,{headers:{Token:n}}).then((function(e){t(p(e))})).catch((function(e){t(d(e))}))}}}}]);
//# sourceMappingURL=393.21e1b9cc.chunk.js.map