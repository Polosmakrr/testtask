"use strict";(self.webpackChunktesttask=self.webpackChunktesttask||[]).push([[977],{9977:function(e,n,t){t.r(n),t.d(n,{default:function(){return p}});var s=t(8152),i=t(2791),a=t(9434),o=t(6871),r=t(9568);var u=t.p+"static/media/success-image.0d3202ba11b04fa7364b0f83ce42aea5.svg",c=t(184),l=function(){return(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("img",{style:{margin:"auto",width:"50%"},src:u,alt:"success"})})},p=function(){var e=(0,a.I0)(),n=(0,a.v9)((function(e){return e.data.positions[0]})),t=(0,o.s0)(),u=document.forms.signUp,p=(0,i.useState)([]),d=(0,s.Z)(p,2),h=d[0],m=d[1],g=(0,i.useState)([]),f=(0,s.Z)(g,2),_=f[0],x=f[1],b=(0,i.useState)([]),v=(0,s.Z)(b,2),j=v[0],N=v[1],y=(0,i.useState)([]),w=(0,s.Z)(y,2),P=w[0],S=w[1],z=(0,i.useState)([]),A=(0,s.Z)(z,2),k=A[0],U=A[1],H=(0,i.useState)(!1),Z=(0,s.Z)(H,2),q=Z[0],C=Z[1];(0,i.useEffect)((function(){e((0,r.Av)())}),[]);var E=function(e){var n=e.target,t=n.name,s=n.value;"name"===t&&m(s),"email"===t&&N(s),"phone"===t&&x(s),"position_id"===t&&S(s),"photo"===t&&U(s)};return 0!==h.length&&0!==j.length&&0!==_.length&&0!==P.length&&0!==k.length&&(document.querySelector("#submit").disabled=!1),(0,c.jsx)(c.Fragment,{children:q?(0,c.jsx)(l,{}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("section",{className:"container",children:(0,c.jsxs)("div",{className:"signup_container",children:[(0,c.jsx)("h2",{className:"signup_title",children:"Working with POST request"}),(0,c.jsxs)("form",{className:"signup_form",method:"POST",id:"signUp",onSubmit:function(n){n.preventDefault();var s=u.name,i=u.email,a=u.phone,o=u.position_id,c=u.photo,l={position_id:o.value,name:s.value,emali:i.value,phone:a.value,photo:c.files[0]},p=new FormData;p.append("name",l.name),p.append("email",l.emali),p.append("phone",l.phone),p.append("position_id",parseInt(l.position_id)),p.append("photo",l.photo),window.AgencyAxios.get("/token").then((function(n){var t=n.data;return e((0,r.l1)(p,t.token))})).catch((function(e){return e})),C(!0),setTimeout((function(){t("/testtask/users")}),3e3)},children:[(0,c.jsx)("input",{className:"signup_input",type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",minLength:2,maxLength:60,title:"Username should contain 2-60 characters and contain only letters, apostrophe, dash and spaces.",placeholder:"Your Name",onChange:E,required:!0}),(0,c.jsx)("input",{className:"signup_input",type:"email",name:"email",pattern:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",minLength:2,maxLength:100,title:"Email myst be a string and separated into two parts by @ symbol. a personal_info and a domain, that is personal_info@domain.",placeholder:"Email",onChange:E,required:!0}),(0,c.jsx)("input",{className:"signup_input",type:"tel",name:"phone",pattern:"^[\\+]{0,1}380([0-9]{9})$)",title:"Number should start with code of Ukraine +380 and must be digits and can contain spaces, dashes.",placeholder:"Phone",onChange:E,required:!0}),(0,c.jsxs)("div",{className:"signup_select",children:[(0,c.jsx)("p",{className:"signup_select_title",children:"Select your position"}),(0,c.jsx)("ul",{className:"signup_select_list list",children:n&&n.positions.map((function(e){return(0,c.jsxs)("li",{className:"signup_select_list-item",children:[(0,c.jsx)("input",{className:"signup_select_list-input",type:"radio",id:e.id,name:"position_id",value:e.id,onChange:E}),(0,c.jsx)("label",{className:"signup_select_list-label",for:e.id,children:e.name})]},e.id)}))})]}),(0,c.jsxs)("div",{className:"signup_load_img",children:[(0,c.jsx)("label",{className:"signup_load_img-label",for:"file-input",children:"Upload"}),(0,c.jsx)("input",{className:"signup_load_img-input",for:"file-input",value:0!==k.length?"..."+k.split("\\").pop():"Upload your photo",disabled:!0}),(0,c.jsx)("input",{id:"file-input",type:"file",title:"Minimum size of photo 70x70px. The photo format must be jpeg/jpg type. The photo size must not be greater than 5 Mb.",name:"photo",onChange:E})]}),(0,c.jsx)("div",{className:"signup_buttons",children:(0,c.jsx)("button",{className:"btn",type:"submit",id:"submit",disabled:!0,children:"Sign up"})})]})]})})})})}},9568:function(e,n,t){t.d(n,{Av:function(){return d},uh:function(){return p},l1:function(){return h}});var s=t(6382),i=(0,s.PH)("fetchUsersRequest"),a=(0,s.PH)("fetchUsersSuccess"),o=(0,s.PH)("fetchUsersError"),r=(0,s.PH)("fetchPositionsRequest"),u=(0,s.PH)("fetchPositionsSuccess"),c=(0,s.PH)("fetchPositionsError"),l=(0,s.PH)("postUserRequest"),p=((0,s.PH)("postUserSuccess"),(0,s.PH)("postUserError"),function(e){return function(n){n(i()),window.AgencyAxios.get("/users?page=".concat(e,"&count=6")).then((function(e){var t=e.data;n(a(t))})).catch((function(e){return n(o(e))}))}}),d=function(){return function(e){e(r()),window.AgencyAxios.get("/positions").then((function(n){var t=n.data;e(u(t))})).catch((function(n){return e(c(n))}))}},h=function(e,n){return function(t){t(l()),window.AgencyAxios.post("/users",e,{headers:{Token:n}}).then((function(e){})).catch((function(e){return console.log("error",e)}))}}}}]);
//# sourceMappingURL=977.2576d220.chunk.js.map