"use strict";(self.webpackChunktesttask=self.webpackChunktesttask||[]).push([[388],{6388:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var s=n(885),i=n(2791),a=n(9434),o=n(6871),r=n(208),u=n(5122),c=n(4222);var l=n.p+"static/media/success-image.0d3202ba11b04fa7364b0f83ce42aea5.svg",p=n(184),d=function(){var e=(0,a.I0)(),t=(0,a.v9)((function(e){return e.data.positions[0]})),n=(0,a.v9)((function(e){return e.data.postResponse})),d=(0,o.s0)(),h=document.forms.signUp,m=(0,i.useState)([]),f=(0,s.Z)(m,2),g=f[0],_=f[1],x=(0,i.useState)([]),b=(0,s.Z)(x,2),v=b[0],j=b[1],y=(0,i.useState)([]),N=(0,s.Z)(y,2),w=N[0],P=N[1],S=(0,i.useState)([]),A=(0,s.Z)(S,2),z=A[0],H=A[1],U=(0,i.useState)([]),k=(0,s.Z)(U,2),q=k[0],C=k[1];(0,i.useEffect)((function(){e((0,r.Av)())}),[]);(0,i.useEffect)((function(){409===n.status&&c.Am.error("User with this phone or email already exist"),422===n.status&&c.Am.error("Check your entrance data"),201===n.status&&(setTimeout((function(){window.scrollTo({top:document.body.clientHeight,behavior:"smooth"})}),500),c.Am.success("Users was added!"),setTimeout((function(){e(u.Dz()),d("/testtask/users")}),3e3))}),[n]);var T=function(e){var t=e.target,n=t.name,s=t.value;"name"===n&&_(s),"email"===n&&P(s),"phone"===n&&j(s),"position_id"===n&&H(s),"photo"===n&&C(s)};return 0!==g.length&&0!==w.length&&0!==v.length&&0!==z.length&&0!==q.length&&(document.querySelector("#submit").disabled=!1),(0,p.jsxs)("section",{className:"container",children:[(0,p.jsxs)("div",{className:"signup_container",children:[(0,p.jsx)("h2",{className:"signup_title",children:"Working with POST request"}),(0,p.jsxs)("form",{className:"signup_form",method:"POST",id:"signUp",onSubmit:function(t){t.preventDefault();var n=h.name,s=h.email,i=h.phone,a=h.position_id,o=h.photo,u={position_id:a.value,name:n.value,emali:s.value,phone:i.value,photo:o.files[0]},c=new FormData;c.append("name",u.name),c.append("email",u.emali),c.append("phone",u.phone),c.append("position_id",parseInt(u.position_id)),c.append("photo",u.photo),window.AgencyAxios.get("/token").then((function(t){var n=t.data;return e((0,r.l1)(c,n.token))})).catch((function(e){return e}))},children:[(0,p.jsx)("input",{className:"signup_input",type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",minLength:2,maxLength:60,title:"Username should contain 2-60 characters and contain only letters, apostrophe, dash and spaces.",placeholder:"Your Name",onChange:T,required:!0}),(0,p.jsx)("input",{className:"signup_input",type:"email",name:"email",pattern:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",minLength:2,maxLength:100,title:"Email myst be a string and separated into two parts by @ symbol. a personal_info and a domain, that is personal_info@domain.",placeholder:"Email",onChange:T,required:!0}),(0,p.jsx)("input",{className:"signup_input",type:"tel",name:"phone",pattern:"^[\\+]{0,1}380([0-9]{9})$)",title:"Number should start with code of Ukraine +380 and must be digits and can contain spaces, dashes.",placeholder:"Phone",onChange:T,required:!0}),(0,p.jsxs)("div",{className:"signup_select",children:[(0,p.jsx)("p",{className:"signup_select_title",children:"Select your position"}),(0,p.jsx)("ul",{className:"signup_select_list list",children:t&&t.positions.map((function(e){return(0,p.jsxs)("li",{className:"signup_select_list-item",children:[(0,p.jsx)("input",{className:"signup_select_list-input",type:"radio",id:e.id,name:"position_id",value:e.id,onChange:T,required:!0}),(0,p.jsx)("label",{className:"signup_select_list-label",for:e.id,children:e.name})]},e.id)}))})]}),(0,p.jsxs)("div",{className:"signup_load_img",children:[(0,p.jsx)("label",{className:"signup_load_img-label",for:"file-input",children:"Upload"}),(0,p.jsx)("input",{className:"signup_load_img-input",for:"file-input",value:0!==q.length?"..."+q.split("\\").pop():"Upload your photo",disabled:!0}),(0,p.jsx)("input",{id:"file-input",type:"file",title:"Minimum size of photo 70x70px. The photo format must be jpeg/jpg type. The photo size must not be greater than 5 Mb.",name:"photo",required:!0,onChange:T})]}),(0,p.jsx)("div",{className:"signup_buttons",children:(0,p.jsx)("button",{className:"btn",type:"submit",id:"submit",disabled:!0,children:"Sign up"})})]})]}),201===n.status&&(0,p.jsx)("img",{style:{margin:"auto"},src:l,alt:"success"}),(0,p.jsx)(c.Ix,{autoClose:1e3})]})}},5122:function(e,t,n){n.d(t,{Dz:function(){return h},It:function(){return o},Jo:function(){return m},K4:function(){return p},NH:function(){return r},Sg:function(){return c},bG:function(){return i},fR:function(){return d},lv:function(){return u},r8:function(){return l},wM:function(){return a}});var s=n(6382),i=(0,s.PH)("fetchUsersRequest"),a=(0,s.PH)("fetchUsersSuccess"),o=(0,s.PH)("fetchUsersError"),r=(0,s.PH)("fetchPositionsRequest"),u=(0,s.PH)("fetchPositionsSuccess"),c=(0,s.PH)("fetchPositionsError"),l=(0,s.PH)("postUserRequest"),p=(0,s.PH)("postUserSuccess"),d=(0,s.PH)("postUserError"),h=(0,s.PH)("clearResponse"),m=(0,s.PH)("clearState")},208:function(e,t,n){n.d(t,{Av:function(){return a},l1:function(){return o},uh:function(){return i}});var s=n(5122),i=function(e){return function(t){t(s.bG()),window.AgencyAxios.get("/users?page=".concat(e,"&count=6")).then((function(e){var n=e.data;t(s.wM(n))})).catch((function(e){return t(s.It(e))}))}},a=function(){return function(e){e(s.NH()),window.AgencyAxios.get("/positions").then((function(t){var n=t.data;e(s.lv(n))})).catch((function(t){return e(s.Sg(t))}))}},o=function(e,t){return function(n){n(s.r8()),window.AgencyAxios.post("/users",e,{headers:{Token:t}}).then((function(e){return n(s.K4(e)),e})).catch((function(e){return n(s.fR(e)),e}))}}}}]);
//# sourceMappingURL=388.96817cdd.chunk.js.map